env:
  global:
  - GCP_PROJECT_ID=terraform-292215
  - tf_version=0.13.5
  - CLOUDSDK_CORE_DISABLE_PROMPTS=1
  - secure: FoYIN/Ba7SSmYPS9Y3/uUfEqU21u12aCfQM/UP++M/dJJJQjv5/V1rD8kr3ScH0X0CM92BftsTQHas93TrDD2mT/cx+9aCsRKUoCEzJaaiODEdaI0jr8omaQr4CjhNIOBa1/Pt7kH5Yw2IMesyV1M+32iztpIeyv7lq4OxELHOcjuzVWbnQY9Y8IHXq29E2banoa+19Tqo8opkY3dmQl4TkvVp2cIQYS98BFWvIAyWFCwRcuh4q1I/SFGlxAb5fggkZLBKX+rdhkt9bPQLJ5ot0Q5mscpt7xBmJblSip/vvD1ldZjtt+NExUVhdUFPgdOxcTA5rlGO1T8Zsjoyopx8mTly8WJV9eLdF0YllM8XvRANLADIeQsP/+0Mnsj4GBBErmuuxno9wVUkzSpjyYo4UTekoZqiRXf3nPn+I+pt7no/tZYMgvuyfaitir1SnXTHV86DlxC3KexrTXEVq7AWG3rxs3GPrdjhV1jLuahMXR0vwlvwcHTyTxLUX1Z1ozG9rJ2++WRqtKUAfkHfE1nFcdUIAp0y4i45LrsQXxe014kQb3x4dy5qmDr+kN8foFlltCAby/ckv2ox1Rv54l/sZQnbrnegcY3rzmNUyuIKhc+9O6PD01mvRQq71N0DxOs4Ep61SwBJsKMA6Ha5zuh7bxIF4805EySdqQWyjKy+g=
  - secure: qrgcFJBciGIgcAAc6gAeJ/VedsNQqgsExHLWSDACQd6kfA9qx1eAVqfdhjMuGUHpHkVyfuGE3sO0ugDQGgelgU9B5G/UxWhKf3xEg0GUvFTEoTEotpglsEIqolSNUWs0K7XKCNkrUz8eWX6vuDZfK6TmwVmd5pAYqxu+xMs+4x50bneKLqnNmLe8l6FKigwwMuyHYvRiVVHaofL3dOemP9BVfKFgRb2fzpfcm+mA2ehiYlBHGP8zNbSlEyMyTmeCNM2GKcHqlT2onOCbjt7Htx7V5fuF4JeWItkwONlYZ9tp05K3om2VMveKWA+XZMn1Kq9zysy3p/B4psJdtkZzhvfL5u8EuVBUlR8vBMTh+0fWIevxOyBB5nY2rNFLSxk0PaZCw4mxuCoP2WAqRZXHmlYGdwHJggg+nhZLp56kYxkS3U5WIJ+j6ddcyrXCgeeKRSHpt6x+/QvQbGC2HxZyUWgymK63AiGQM4hXUDwmgqzmtOtyK0FkCWgZLriutOsaXqRbL9dv7AtlMO4rk2Gg/SvxtQhJSi49DIsz92Zp0WvSakKKr5q7whrfV3xkXVSKlKisMqTL9UnLCn3/LB1sp9rYjY76TmGXmZFS//KB5dmsb/E+CGOkrTTn/VGPD5SVVktZ9ry+Utxj6cONg0PxFCi23aYoZ6gTgqUNoJh5b3w=
  - secure: DNgsy5lxEsk1aJ+EGNcl82IuxmPaCXxrq77nVyPkswmwKWQ001IqBASyzeBjjiwp3q/XYB2DOyEdxHVCnf92yx0mT31AAJT85Z2WIVYVVIJN8cvvZQqLt3YY/ll/gJXopeCgzjKhI8sAkUqx3zC0/tNu7CrkBFw/oG/U4WHNphhbBnsR+n6WoBk4/IJ1X9udwTe95TKNnLo5dM1R72E7B9AgjtpqvIhnVznR0okJJTZuwbuhjZhZ1QuBeGy3HOnvmG3BguTsiS42EHp2TstizsZuUxyAnbyK7UarJMT4Jo5mZwkqyI6tqhzS7bdJBfY63zyzV063pyVXFlbRzZYvDoii5FF6Z8lZqWVPpszpwX9TrLsdhyAJXSv2ktbnllDJWJL1H4AaQOdSrT7Wx+eIAA3X/FkmaIg1P1UTIxwHX9r+9N1CST+5ZgEe1FReNImGqdeAqSUN0yFn8Aq/PV4lBb5Z1SGS8644/GsCLTQGySiITeBkEyncQ6ragwnrsdq86dMyoQQrRcbMktjmVtVlg/Q+hguw51iAWpNZqzxUoyCEqURe2A4btNhR2R3nQaL67R9t/dhkE2qlEW9+jmZU0CkYW961JNob3ol+gJlZXOvA8staGCYnbke27II9h3kek++V1KjMFMYTI4lIqJxY6Cs9p90aS8cH1Pd11GQzgxo=
  - secure: ITxlFjOJ379GDIT40G5VPI5R7EH6O/qLwHfuWQeEr+SALqIgeGeLleSLLbyTsn35S2fLdJDWkVpFaPxFXyi9vAzjORZenrOQZR3wE0MLd/GBgVBcDVjvVjlVjZOFMIZowcuQCgnuRrNWHOC2dOjKjBFXog5nMQJP4rCtb4i1J4NKFwrR3iGZAdepibA8kU1400Cq7zwPjxBVHzKFG7hIrZJKZJpFIeq/FNkxQdxjG8xp/9PsnDsk97SDgLdYnmqYp3xUcIjUN/E7Af0XeQpxeYfRAciWvtdyAII9Jy63iFhkbqNt5ks9/kLqZ7D9tvEHzxFirgVNPWauJa3fE8vCrPJ6dmbdOk8JEnxhry/b4pVpgZ/tq5U1QG/pRmTC1pUFc8q8rSlAGRox4h559OH9ax2RJzmv1fRJfgAXXoByssAE3Ypl347pRhOIpDE5bf8fTBZ2ejJFONcAdL6Cqvd07g6KmUxakjeZsc/byp9RH7mLCInbzF6IRBSYbLL2uYq4JrxboH0//gA8NMiFBTpYCxsBu02U9CF3RUjdj+f3L7MeI2FN2Qu/N5IwU+9a9D5hF5tHqBFmbC4h4ctoQfsVTk9izvAUg+tAon8JqEkEwdgZzX4gpBCbDmV1RzRWKEqzNr07bOOBlIcLy6Z59Dkd0ox/RyWXc8ru/sCJwivsdxE=
branches:
  only:
  - master
before_install:
- curl https://sdk.cloud.google.com | bash > /dev/null
- source "$HOME/google-cloud-sdk/path.bash.inc"
- gcloud auth activate-service-account --key-file=terraform.json
- gcloud config set project "${GCP_PROJECT_ID}"
- export GOOGLE_APPLICATION_CREDENTIALS=./terraform.json
- wget https://releases.hashicorp.com/terraform/"$tf_version"/terraform_"$tf_version"_linux_amd64.zip
- unzip terraform_"$tf_version"_linux_amd64.zip
- sudo mv terraform /usr/local/bin/
- rm terraform_"$tf_version"_linux_amd64.zip
install: true
script:
- |-
  set -ex;
  export TF_VAR_logz_token=$LOGZ_TOKEN
  export TF_VAR_logz_url=$LOGZ_URL
  terraform init
  terraform plan
  terraform apply --auto-approve
  terraform output
